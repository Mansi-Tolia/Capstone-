---
title: "R Notebook"
output: html_notebook
---


```{r}
library(stringr)
library(dplyr)
library(ggplot2)
library(stringr)

institutional_data<-read.csv("~/Desktop/Ipeds 2016-2018/Institutional data.csv")
institutional_data<-institutional_data[,c(1,4:6,8)]
names(institutional_data)<-gsub("HD2018.", "", names(institutional_data))

y2017<-read.csv("~/Desktop/Ipeds 2016-2018/2017.csv")
y2017$Undergraduate.enrollment<-read.csv("~/Desktop/Ipeds 2016-2018/undergraduate enrollment 2017.csv") %>% 
  select(DRVEF2017_RV.Undergraduate.enrollment)
names(y2017)
dim(y2017)

y2018<-read.csv("~/Desktop/Ipeds 2016-2018/2018.csv")
y2018$Undergraduate.enrollment<-read.csv("~/Desktop/Ipeds 2016-2018/undergraduate enrollment 2018.csv")%>% 
  select(DRVEF2018.Undergraduate.enrollment)
names(y2018)
dim(y2018)

y2016<-read.csv("~/Desktop/Ipeds 2016-2018/2016.csv")[,-c(33:44)]
enrol2016<-read.csv("~/Desktop/Ipeds 2016-2018/undergraduate enrollment 2016.csv")

names(y2016)<-gsub("DRVGR2016_RV.", "", names(y2016))
names(y2016)<-gsub("SFA1516_RV.", "", names(y2016))
names(y2016)<-gsub("DRVADM2016_RV.", "", names(y2016))
names(y2016)<-gsub("..2015.16", "", names(y2016))
names(y2016)<-gsub("DRVEF2016_RV.", "", names(y2016))
names(y2016)<-gsub("DRVF2016_RV.", "", names(y2016))
y2016<-y2016[,order(colnames(y2016))]

names(y2017)<-gsub("DRVGR2017_RV.", "", names(y2017))
names(y2017)<-gsub("SFA1617_RV.", "", names(y2017))
names(y2017)<-gsub("DRVADM2017_RV.", "", names(y2017))
names(y2017)<-gsub("..2016.17", "", names(y2017))
names(y2017)<-gsub("DRVEF2017_RV.", "", names(y2017))
names(y2017)<-gsub("DRVF2017_RV.", "", names(y2017))
y2017<-y2017[,order(colnames(y2017))]

names(y2018)<-gsub("DRVGR2018.", "", names(y2018))
names(y2018)<-gsub("SFA1718.", "", names(y2018))
names(y2018)<-gsub("DRVADM2018.", "", names(y2018))
names(y2018)<-gsub("..2017.18", "", names(y2018))
names(y2018)<-gsub("DRVEF2018.", "", names(y2018))
names(y2018)<-gsub("DRVF2018.", "", names(y2018))
y2018<-y2018[,order(colnames(y2018))]

data2016_2018<- rbind(y2016,y2017,y2018)%>% select(year,unitid,institution.name,everything())
names(data2016_2018)
names(data2016_2018) <- gsub("\\.", "_", names(data2016_2018))

data2016_2018<-merge(data2016_2018,institutional_data,by = "unitid")
View(data2016_2018)
```
